<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Hello World!</title>
</head>

<body>
    <h1>SpeechRecognition</h1>
    <button id="talk">Talk</button>
    <p></p>
    <video autoplay></video>
    <script src="./public/javascripts/jquery-3.3.1.min.js"></script>
    <script>

        function errorCallback(e) {
            console.log('Error', e)
         }

         navigator.getUserMedia({video: true, audio: true}, (localMediaStream) => {
            var video = document.querySelector('video')
            var binaryData = [];
            binaryData.push(localMediaStream);
            video.src = window.URL.createObjectURL(new Blob(binaryData, {type: "application/zip"}))
            video.onloadedmetadata = (e) => {
               // Ready to go. Do some stuff.
            };
         }, errorCallback)



        const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
        const recognition = new SpeechRecognition();

        recognition.onstart = () => {
            console.log("Listening...");
        }

        recognition.onresult = (e) => {
            //$('p').html(e.results[0][0].transcript);
            console.log(e.results[0][0].transcript)
        }

        //$('button#talk').click(()=>{
            recognition.start();
        //});
    </script>
</body>

</html>